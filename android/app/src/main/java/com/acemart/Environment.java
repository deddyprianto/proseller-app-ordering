package com.acemart;

import java.util.Arrays;

/**
 * Environment
 * Created by jason on 2019-05-03.
 */
public class Environment {
    private static Environment singleton = null; //new Environment();
    private AppConfig appConfig;

    static {
        singleton = new Environment();
    }
    /* A private Constructor prevents any other
     * class from instantiating.
     */
    private Environment() {

    }

    /**
     *
     * @param appConfig
     */
    public void doInit(AppConfig appConfig) {
       this.appConfig = appConfig;
        setEnvironment(appConfig);
    }

    private void setEnvironment(AppConfig appConfig) {
       if(appConfig==null) return;
        MERCHANT_HOST_BASE_URL = appConfig.getMHOST_URL();
        MERCHANT_HOST_GMT_URL = MERCHANT_HOST_BASE_URL + "/gmt";
        MERCHANT_HOST_CFA_URL = MERCHANT_HOST_BASE_URL + "/cfa";
        MERCHANT_HOST_CFA_PURCHASE_URL = MERCHANT_HOST_BASE_URL + "/cfapurchase";
        MERCHANT_HOST_CFA_CANCEL_URL = MERCHANT_HOST_BASE_URL + "/cfacancel";
        MERCHANT_HOST_PURCHASE_URL = MERCHANT_HOST_BASE_URL + "/purchase";
        MERCHANT_HOST_STATUSCHECK_URL = MERCHANT_HOST_BASE_URL + "/statuscheck";
        MERCHANT_HOST_PURCHASEREVERSAL_URL = MERCHANT_HOST_BASE_URL + "/purchasereversal";
        VERSION = "NEW";
        APP_ID = appConfig.getAPP_ID();
        APP_SECRET = appConfig.getAPP_SECRET();

        MAP_PUBLIC_KEY_ID = appConfig.getMAP_PUB_KEY_ID();
        MAP_PUBLIC_KEY_EXPONENT = appConfig.getMAP_PUB_KEY_EXP();
        MAP_PUBLIC_KEY_MODULUS = appConfig.getMAP_PUB_KEY_MODULUS();

        // num of HPP public key
        int numOfHPPPublicKey = 5;
        HPP_PUBLIC_KEY_ID = new String[numOfHPPPublicKey];
        HPP_PUBLIC_KEY_EXPONENT = new String[numOfHPPPublicKey];
        HPP_PUBLIC_KEY_MODULUS = new String[numOfHPPPublicKey];

        // initialize array
        for (int i = 0; i < numOfHPPPublicKey; i++) {
            HPP_PUBLIC_KEY_ID[i] = new String();
            HPP_PUBLIC_KEY_EXPONENT[i] = new String();
            HPP_PUBLIC_KEY_MODULUS[i] = new String();
        }

        //HPP Public Key (DBS issuer ID: 0001)
        HPP_PUBLIC_KEY_ID[0] = "1";
        HPP_PUBLIC_KEY_EXPONENT[0] = "03";
        HPP_PUBLIC_KEY_MODULUS[0] = "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";


        //HPP Public Key (UOB issuer ID: 0002)
        HPP_PUBLIC_KEY_ID[1] = "2";
        HPP_PUBLIC_KEY_EXPONENT[1] = "03";
        HPP_PUBLIC_KEY_MODULUS[1] = "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

        //HPP Public Key (OCBC issuer ID: 0003)
        HPP_PUBLIC_KEY_ID[2] = "3";
        HPP_PUBLIC_KEY_EXPONENT[2] = "03";
        HPP_PUBLIC_KEY_MODULUS[2] = "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

        //HPP Public Key (OCBC NOF issuer ID: 0004)
        HPP_PUBLIC_KEY_ID[3] = "4";
        HPP_PUBLIC_KEY_EXPONENT[3] = "03";
        HPP_PUBLIC_KEY_MODULUS[3] = "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

        //HPP Public Key (Bank Simulator issuer ID: 9999)
        HPP_PUBLIC_KEY_ID[4] = "9";
        HPP_PUBLIC_KEY_EXPONENT[4] = "03";
        HPP_PUBLIC_KEY_MODULUS[4] = "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";


//        AXWAY_PUB_KEY = "B71773134D0931D5038F21AB01DD32214D6721C03B4D269EBC3F2AD5EFDDF643";
        //AXWAY_PUB_KEY = "netspay_20170705";
        //IS_DEMO = true;
        MAP_SERVER_CERT = appConfig.getMAP_SERVER_CERT();

        BASE_MAP_URL = appConfig.getMAP_URL();
        BASE_API_URL = appConfig.getPNBLOCK_URL();

        MID = appConfig.getMID();
    }


    public static Environment getInstance() {
        return singleton;
    }

    public String getVERSION() {
        return VERSION;
    }

    public void setVERSION(String VERSION) {
        this.VERSION = VERSION;
    }

    public String getAPP_ID() {
        return APP_ID;
//        try {
//            return AESUtil.decrypt(APP_ID);
//        } catch (Exception e) {
//            return null;
//        }
    }

    public void setAPP_ID(String APP_ID) {
        this.APP_ID = APP_ID;
    }

    public String getAPP_SECRET() {
        return APP_SECRET;
//        try {
//            return AESUtil.decrypt(APP_SECRET);
//        } catch (Exception e) {
//            return null;
//        }
    }

    public void setAPP_SECRET(String APP_SECRET) {
        this.APP_SECRET = APP_SECRET;
    }

    public String getMAP_PUBLIC_KEY_ID() {
        return MAP_PUBLIC_KEY_ID;
    }

    public void setMAP_PUBLIC_KEY_ID(String MAP_PUBLIC_KEY_ID) {
        this.MAP_PUBLIC_KEY_ID = MAP_PUBLIC_KEY_ID;
    }

    public String getMAP_PUBLIC_KEY_EXPONENT() {
        return MAP_PUBLIC_KEY_EXPONENT;
    }

    public void setMAP_PUBLIC_KEY_EXPONENT(String MAP_PUBLIC_KEY_EXPONENT) {
        this.MAP_PUBLIC_KEY_EXPONENT = MAP_PUBLIC_KEY_EXPONENT;
    }

    public String getMAP_PUBLIC_KEY_MODULUS() {
        return MAP_PUBLIC_KEY_MODULUS;
    }

    public void setMAP_PUBLIC_KEY_MODULUS(String MAP_PUBLIC_KEY_MODULUS) {
        this.MAP_PUBLIC_KEY_MODULUS = MAP_PUBLIC_KEY_MODULUS;
    }

    public String getHPP_PUBLIC_KEY_ID(int index) {
        return HPP_PUBLIC_KEY_ID[index];
    }

    public String getHPP_PUBLIC_KEY_EXPONENT(int index) {
        return HPP_PUBLIC_KEY_EXPONENT[index];
    }

    public String getHPP_PUBLIC_KEY_MODULUS(int index) {
        return HPP_PUBLIC_KEY_MODULUS[index];
    }

    public String getMAP_SERVER_CERT() {
        return MAP_SERVER_CERT;
    }

    public void setMAP_SERVER_CERT(String MAP_SERVER_CERT) {
        this.MAP_SERVER_CERT = MAP_SERVER_CERT;
    }

    public String getMERCHANT_HOST_GMT_URL() {
        return MERCHANT_HOST_GMT_URL;
    }

    public void setMERCHANT_HOST_GMT_URL(String MERCHANT_HOST_GMT_URL) {
        this.MERCHANT_HOST_GMT_URL = MERCHANT_HOST_GMT_URL;
    }

    public String getMERCHANT_HOST_CFA_URL() {
        return MERCHANT_HOST_CFA_URL;
    }

    public void setMERCHANT_HOST_CFA_URL(String MERCHANT_HOST_CFA_URL) {
        this.MERCHANT_HOST_CFA_URL = MERCHANT_HOST_CFA_URL;
    }

    public String getMERCHANT_HOST_CFA_PURCHASE_URL() {
        return MERCHANT_HOST_CFA_PURCHASE_URL;
    }

    public void setMERCHANT_HOST_CFA_PURCHASE_URL(String MERCHANT_HOST_CFA_PURCHASE_URL) {
        this.MERCHANT_HOST_CFA_PURCHASE_URL = MERCHANT_HOST_CFA_PURCHASE_URL;
    }

    public String getMERCHANT_HOST_PURCHASE_URL() {
        return MERCHANT_HOST_PURCHASE_URL;
    }

    public void setMERCHANT_HOST_PURCHASE_URL(String MERCHANT_HOST_PURCHASE_URL) {
        this.MERCHANT_HOST_PURCHASE_URL = MERCHANT_HOST_PURCHASE_URL;
    }

    public String getMERCHANT_HOST_CFA_CANCEL_URL() {
        return MERCHANT_HOST_CFA_CANCEL_URL;
    }

    public void setMERCHANT_HOST_CFA_CANCEL_URL(String MERCHANT_HOST_CFA_CANCEL_URL) {
        this.MERCHANT_HOST_CFA_CANCEL_URL = MERCHANT_HOST_CFA_CANCEL_URL;
    }

    public String getMERCHANT_HOST_STATUSCHECK_URL() {
        return MERCHANT_HOST_STATUSCHECK_URL;
    }

    public void setMERCHANT_HOST_STATUSCHECK_URL(String MERCHANT_HOST_STATUSCHECK_URL) {
        this.MERCHANT_HOST_STATUSCHECK_URL = MERCHANT_HOST_STATUSCHECK_URL;
    }

    public String getMERCHANT_HOST_PURCHASEREVERSAL_URL() {
        return MERCHANT_HOST_PURCHASEREVERSAL_URL;
    }

    public void setMERCHANT_HOST_PURCHASEREVERSAL_URL(String MERCHANT_HOST_PURCHASEREVERSAL_URL) {
        this.MERCHANT_HOST_PURCHASEREVERSAL_URL = MERCHANT_HOST_PURCHASEREVERSAL_URL;
    }

    public void setMERCHANT_HOST_BASE_URL(String MERCHANT_HOST_BASE_URL){
        this.MERCHANT_HOST_BASE_URL = MERCHANT_HOST_BASE_URL;
    }

    public String getBASE_MAP_URL() {
        return BASE_MAP_URL;
    }

    public String getBASE_API_URL() {
        return BASE_API_URL;
    }

    public String getMID() {
        return MID;
    }

    //private String  HOST_URL;
    private String  VERSION;
    private String  APP_ID;
    private String  APP_SECRET;
    private String  MAP_PUBLIC_KEY_ID;
    private String  MAP_PUBLIC_KEY_EXPONENT;
    private String  MAP_PUBLIC_KEY_MODULUS;
    private String  HPP_PUBLIC_KEY_ID[];
    private String  HPP_PUBLIC_KEY_EXPONENT[];
    private String  HPP_PUBLIC_KEY_MODULUS[];
    private String  AXWAY_PUB_KEY;
    private String  MAP_SERVER_CERT;
    private String  MERCHANT_HOST_BASE_URL;
    private String  MERCHANT_HOST_GMT_URL;
    private String  MERCHANT_HOST_CFA_URL;
    private String  MERCHANT_HOST_CFA_PURCHASE_URL;
    private String  MERCHANT_HOST_PURCHASE_URL;
    private String  MERCHANT_HOST_CFA_CANCEL_URL;
    private String  MERCHANT_HOST_STATUSCHECK_URL;
    private String  MERCHANT_HOST_PURCHASEREVERSAL_URL;
    private String  BASE_MAP_URL;
    private String  BASE_API_URL;
    private String  MID;


    public String getEnvironmentDetails() {
        return "Environment{" +
                "APP_ID='" + APP_ID + '\'' +
                ", APP_SECRET='" + APP_SECRET + '\'' +
                ", MAP_PUBLIC_KEY_ID='" + MAP_PUBLIC_KEY_ID + '\'' +
                ", MAP_PUBLIC_KEY_EXPONENT='" + MAP_PUBLIC_KEY_EXPONENT + '\'' +
                ", MAP_PUBLIC_KEY_MODULUS='" + MAP_PUBLIC_KEY_MODULUS + '\'' +
                ", HPP_PUBLIC_KEY_ID=" + Arrays.toString(HPP_PUBLIC_KEY_ID) +
                ", HPP_PUBLIC_KEY_EXPONENT=" + Arrays.toString(HPP_PUBLIC_KEY_EXPONENT) +
                ", HPP_PUBLIC_KEY_MODULUS=" + Arrays.toString(HPP_PUBLIC_KEY_MODULUS) +
                ", AXWAY_PUB_KEY='" + AXWAY_PUB_KEY + '\'' +
                ", MAP_SERVER_CERT='" + MAP_SERVER_CERT + '\'' +
                ", MERCHANT_HOST_BASE_URL='" + MERCHANT_HOST_BASE_URL + '\'' +
                ", MERCHANT_HOST_GMT_URL='" + MERCHANT_HOST_GMT_URL + '\'' +
                ", MERCHANT_HOST_CFA_URL='" + MERCHANT_HOST_CFA_URL + '\'' +
                ", MERCHANT_HOST_CFA_PURCHASE_URL='" + MERCHANT_HOST_CFA_PURCHASE_URL + '\'' +
                ", MERCHANT_HOST_PURCHASE_URL='" + MERCHANT_HOST_PURCHASE_URL + '\'' +
                ", MERCHANT_HOST_CFA_CANCEL_URL='" + MERCHANT_HOST_CFA_CANCEL_URL + '\'' +
                ", MERCHANT_HOST_STATUSCHECK_URL='" + MERCHANT_HOST_STATUSCHECK_URL + '\'' +
                ", MERCHANT_HOST_PURCHASEREVERSAL_URL='" + MERCHANT_HOST_PURCHASEREVERSAL_URL + '\'' +
                ", BASE_MAP_URL='" + BASE_MAP_URL + '\'' +
                ", BASE_API_URL='" + BASE_API_URL + '\'' +
                ", MID='" + MID + '\'' +
                '}';
    }
}
